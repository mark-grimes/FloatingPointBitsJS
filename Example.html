<!DOCTYPE html>
<meta charset="utf-8" />
<title>Floating point bit test</title>
<script language="javascript" type="text/javascript" src="FloatingPoint.js"></script>
<script language="javascript" type="text/javascript">

	var floatNumber=new Module.FloatBits;

	function init()
	{
		checkboxDiv=document.getElementById("bitCheckboxes");
		for( index=floatNumber.size()-1; index>=0; --index )
		{
			var x = document.createElement("INPUT");
			x.setAttribute("type", "checkbox");
			x.setAttribute("id", "bit"+index);
			x.setAttribute("onclick", "bitChanged("+index+")" );
			checkboxDiv.appendChild(x);
		}
		decimalChanged();
	}

	function bitChanged( bitNumber )
	{
		floatNumber.set(bitNumber,document.getElementById("bit"+bitNumber).checked)
		setDecimal();
		setBinary();
		setHex();
		setDouble();
	}

	function setBits()
	{
		for( index=0; index<floatNumber.size(); ++index )
		{
			document.getElementById("bit"+index).checked=floatNumber.get(index);
		}
	}

	function decimalChanged()
	{
		value=parseFloat(document.getElementById("decimal").value);
		floatNumber.valueFrom(value);
		setBits();
		setBinary();
		setHex();
		setDouble();
	}

	function setDecimal()
	{
		document.getElementById("decimal").value=floatNumber.value().toString(10);
	}

	function binaryChanged()
	{
		value=parseInt(document.getElementById("binary").value,2);
		floatNumber.bitValueFromInt(value);
		setBits();
		setDecimal();
		setHex();
		setDouble();
	}

	function setBinary()
	{
		value=floatNumber.asInt();
		if( value<0 ) value=value+Math.pow(2,32);
		document.getElementById("binary").value=value.toString(2);
	}

	function hexChanged()
	{
		value=parseInt(document.getElementById("hex").value,16);
		floatNumber.bitValueFromInt(value);
		setBits();
		setDecimal();
		setBinary();
		setDouble();
	}

	function setHex()
	{
		value=floatNumber.asInt();
		if( value<0 ) value=value+Math.pow(2,32);
		document.getElementById("hex").value="0x"+value.toString(16);
	}

	function setDouble()
	{
		document.getElementById("double").value=floatNumber.value().toString(10);
	}

	window.addEventListener("load", init, false);
</script>
<h2>Simple example of using the FloatingPoint library to find floats from their binary representation</h2>
<p>
	<div id="bitCheckboxes"></div>
	<br>
	<table>
		<tr><td>Decimal <td><input type="text" id="decimal" size=70 value="0" onchange="decimalChanged()"/>
		<tr><td>Binary <td><input type="text" id="binary" size=70 onchange="binaryChanged()"/>
		<tr><td>Hex <td><input type="text" id="hex" size=70 onchange="hexChanged()"/>
		<tr><td>After casting <td><input type="text" id="double" size=70 disabled=true/>
	</table>
	<br>
	The old page for comparison:
	<iframe class="oldCode" src="http://www.h-schmidt.net/FloatConverter/IEEE754.html" width="100%" height="500"></iframe>
</p>
